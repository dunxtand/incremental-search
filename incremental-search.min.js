window.IncrementalSearch=function(t,e,n,r,i){function o(t){return t&&"function"==typeof t}r||(r=function(t){return t});var a={html:/(<([^>]+)>)/gi,punc:/[.,\/#!?$%\^&\*;:{}=\-_`~()]/g,white:/\s+/},l=3,c="result-item-link";function s(t){return t.replace(a.html,"").replace(a.punc,"").toLowerCase()}function u(t,e,n){return function(i){e.empty();var c,s,u=(c=t.val().replace(a.html,"").replace(a.punc,"").toLowerCase().split(a.white).filter(function(t){return"string"==typeof t&&t.length>=l}),r(c)),h=(s=u,[].concat.apply([],s.map(function(t){for(var e,n=[],r=l;r<t.length;++r)(e=t.substring(0,r)).length>=l&&n.push(e);return n}))),f=n.sortedMatchesFor(u,h);if(!u.length||!f.length)return o(n.onNoMatches)&&n.onNoMatches(u),!1;f.forEach(function(t){e.append(t.asListItem(u))}),o(n.afterAppend)&&n.afterAppend(u,f)}}return function(e){var n,i,o,h,f,p,g,d=e.highlightColor||"#000",m=e.mapping||{},v=(h=e.searchableProps,f=d,p=e.linkClass,{count:function(t){var e,n,r=0,i=t.length;for(e=0;e<i;++e)(n=t[e]).length<l||h.forEach(function(t){if(!this[t])return!1;var e,i=this[t];for(e=0;e<i.length;++e)-1!==i[e].indexOf(n)&&(r+=1)},this);return r},highlightedTitle:function(t){for(var e,n,r,i,o=this.originalTitle.split(a.white),l="<span style='font-weight:bold;color:"+f+";'>",c=0;c<o.length;++c)for(var s=0;s<t.length;++s)e=o[c].toLowerCase(),n=t[s].toLowerCase(),-1!==(i=e.indexOf(n))&&(r=o[c].substr(i,n.length),o[c]=o[c].split(r).join(l+r+"</span>"));return o.join(" ")},asListItem:function(e){var n=t("<a href='#'></a>");return n.attr("href",this.url),n.addClass(p||c),n.html(this.highlightedTitle.call(this,e)),t("<li></li>").append(n)}}),w=(n=e.data,i=v,o=m,n.map(function(t){var e=Object.assign(Object.create(i),t,{originalTitle:t.title,title:s(t.title).split(a.white)});return Object.keys(e).forEach(function(t){if(o[t]&&"string"==typeof e[t]){var n=o[t].to||t,i=o[t].split,l=s(e[t]);!1!==o[t].removeStopWords&&(l=r(l)),e[n]=l.split(i||a.white)}}),e})),y=e.form,b=y.find("input"),C=u(b,e.list,{sortedMatchesFor:(g=w,function(t,e){return g.filter(function(n){return n.count(t.concat(e))>0}).sort(function(e,n){return e.count(t)>n.count(t)}).reverse()}),onNoMatches:e.onNoMatches,afterAppend:e.afterAppend});b.keyup(C),y.submit(function(t){t.preventDefault()})}}(jQuery,window,document);
